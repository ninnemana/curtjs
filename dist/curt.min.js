/*!
 Author: Alex Ninneman
curt 25-06-2013 */
$.support.cors=!0;var API_DOMAIN="http://goapi.curtmfg.com",API_KEY="8aee0620-412e-47fc-900a-947820ea1c1d",CurtVehicle=function(){return this};CurtVehicle.prototype={year:0,make:"",model:"",submodel:"",configuration:[],parts:[],groups:[],reset:function(a){this.year=0,this.make=this.model=this.submodel="",this.configuration=this.parts=this.groups=[],a&&a()},get_years:function(a){this.year=0,this.make=this.model=this.submodel="",this.configuration=this.parts=this.groups=[],$.ajax({url:API_DOMAIN+"/vehicle",type:"get",dataType:"json",data:{key:API_KEY},success:function(b){void 0!==b.ConfigOption&&void 0!==b.ConfigOption.Options&&b.ConfigOption.Options.length>0?a(b.ConfigOption.Options,null):a([],"Failed to retrieve vehicle years")},error:function(b,c,d){a([],d)}})},get_makes:function(a){this.make=this.model=this.submodel="",this.configuration=this.parts=this.groups=[],$.ajax({url:API_DOMAIN+"/vehicle/"+this.year,type:"get",dataType:"json",data:{key:API_KEY},success:function(b){void 0!==b.ConfigOption&&void 0!==b.ConfigOption.Options&&b.ConfigOption.Options.length>0?a(b.ConfigOption.Options,null):a([],"Failed to retrieve vehicle makes")},error:function(b,c,d){a([],d)}})},get_models:function(a){this.model=this.submodel="",this.configuration=this.parts=this.groups=[],$.ajax({url:API_DOMAIN+"/vehicle/"+this.year+"/"+this.make,type:"get",dataType:"json",data:{key:API_KEY},success:function(b){null!==b.Matched.Parts&&b.Matched.Parts.length>0&&(this.parts=b.Matched.Parts,this.groups=b.Matched.Groups),void 0!==b.ConfigOption&&void 0!==b.ConfigOption.Options&&b.ConfigOption.Options.length>0?a(b.ConfigOption.Options,null):a([],"Failed to retrieve vehicle models")},error:function(b,c,d){a([],d)}})},get_submodels:function(a){this.submodel="",this.configuration=this.parts=this.groups=[],$.ajax({url:API_DOMAIN+"/vehicle/"+this.year+"/"+this.make+"/"+this.model,type:"get",dataType:"json",data:{key:API_KEY},success:function(b){null!==b.Matched.Parts&&b.Matched.Parts.length>0&&(this.parts=b.Matched.Parts,this.groups=b.Matched.Groups),void 0!==b.ConfigOption&&void 0!==b.ConfigOption.Options&&b.ConfigOption.Options.length>0?a(b.ConfigOption.Options,null):a([],"Failed to retrieve vehicle sub models")},error:function(b,c,d){a([],d)}})},get_configuration:function(a){this.parts=this.groups=[],path=API_DOMAIN+"/vehicle/"+this.year+"/"+this.make+"/"+this.model+"/"+this.submodel;for(var b=this.configuration.length-1;b>=0;b--)path+="/"+this.configuration[b];$.ajax({url:path,type:"get",dataType:"json",data:{key:API_KEY},success:function(b){null!==b.Matched.Parts&&b.Matched.Parts.length>0&&(this.parts=b.Matched.Parts,this.groups=b.Matched.Groups),null!==b.ConfigOption&&null!==b.ConfigOption.Options&&b.ConfigOption.Options.length>0?a(b.ConfigOption,null):a([],"Failed to retrieve vehicle configuration options")},error:function(b,c,d){a([],d)}})}};