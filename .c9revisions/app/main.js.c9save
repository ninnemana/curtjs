{"ts":1373230316678,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var API_DOMAIN = 'http://goapi.curtmfg.com',\n\tAPI_KEY    = '8aee0620-412e-47fc-900a-947820ea1c1d';\n\n\nwindow.CurtVehicle = function(){\n\t$.support.cors = true;\n\n\tfunction CurtVehicle(){\n\n\t}\n\tvar vehicle = {\n\t\tyear: 0,\n\t\tmake: '',\n\t\tmodel: '',\n\t\tsubmodel: '',\n\t\tconfiguration: [], // []string\n\t\tparts: [], // []Part\n\t\tgroups: [], // []int\n\t\treset: function(callback){\n\t\t\tthis.year = 0;\n\t\t\tthis.make = this.model = this.submodel = '';\n\t\t\tthis.configuration = this.parts = this.groups = [];\n\n\t\t\tif(callback){\n\t\t\t\tcallback();\n\t\t\t}\n\t\t},\n\t\tget_years: function(callback){\n\t\t\tthis.year = 0;\n\t\t\tthis.make = this.model = this.submodel = '';\n\t\t\tthis.configuration = this.parts = this.groups = [];\n\n\t\t\t$.ajax({\n\t\t\t\turl: API_DOMAIN + '/vehicle',\n\t\t\t\ttype: 'get',\n\t\t\t\tdataType:'json',\n\t\t\t\tdata: {\n\t\t\t\t\tkey: API_KEY\n\t\t\t\t},\n\t\t\t\tsuccess: function(data, status, xhr){\n\t\t\t\t\tif (data.ConfigOption !== undefined && data.ConfigOption.Options !== undefined && data.ConfigOption.Options.length > 0){\n\t\t\t\t\t\tcallback(data.ConfigOption.Options, null);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tcallback([],\"Failed to retrieve vehicle years\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: function(xhr,status,err){\n\t\t\t\t\tcallback([],err);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tget_makes: function(callback){\n\t\t\tthis.make = this.model = this.submodel = '';\n\t\t\tthis.configuration = this.parts = this.groups = [];\n\n\t\t\t$.ajax({\n\t\t\t\turl: API_DOMAIN + '/vehicle/' + this.year,\n\t\t\t\ttype:'get',\n\t\t\t\tdataType:'json',\n\t\t\t\tdata:{\n\t\t\t\t\tkey: API_KEY\n\t\t\t\t},\n\t\t\t\tsuccess: function(data, status, xhr){\n\t\t\t\t\tif (data.ConfigOption !== undefined && data.ConfigOption.Options !== undefined && data.ConfigOption.Options.length > 0){\n\t\t\t\t\t\tcallback(data.ConfigOption.Options, null);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tcallback([],\"Failed to retrieve vehicle makes\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: function(xhr,status,err){\n\t\t\t\t\tcallback([],err);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tget_models: function(callback){\n\t\t\tthis.model = this.submodel = '';\n\t\t\tthis.configuration = this.parts = this.groups = [];\n\n\t\t\t$.ajax({\n\t\t\t\turl: API_DOMAIN + '/vehicle/' + this.year +'/' + this.make,\n\t\t\t\ttype:'get',\n\t\t\t\tdataType:'json',\n\t\t\t\tdata:{\n\t\t\t\t\tkey: API_KEY\n\t\t\t\t},\n\t\t\t\tsuccess: function(data, status, xhr){\n\t\t\t\t\tif(data.Matched.Parts !== null && data.Matched.Parts.length > 0){\n\t\t\t\t\t\tthis.parts = data.Matched.Parts;\n\t\t\t\t\t\tthis.groups = data.Matched.Groups;\n\t\t\t\t\t}\n\t\t\t\t\tif (data.ConfigOption !== undefined && data.ConfigOption.Options !== undefined && data.ConfigOption.Options.length > 0){\n\t\t\t\t\t\tcallback(data.ConfigOption.Options, null);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tcallback([],\"Failed to retrieve vehicle models\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: function(xhr,status,err){\n\t\t\t\t\tcallback([],err);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tget_submodels: function(callback){\n\t\t\tthis.submodel = '';\n\t\t\tthis.configuration = this.parts = this.groups = [];\n\t\t\t$.ajax({\n\t\t\t\turl: API_DOMAIN + '/vehicle/' + this.year + '/' + this.make + '/' + this.model,\n\t\t\t\ttype:'get',\n\t\t\t\tdataType:'json',\n\t\t\t\tdata:{\n\t\t\t\t\tkey: API_KEY\n\t\t\t\t},\n\t\t\t\tsuccess: function(data, status, xhr){\n\t\t\t\t\tif(data.Matched.Parts !== null && data.Matched.Parts.length > 0){\n\t\t\t\t\t\tthis.parts = data.Matched.Parts;\n\t\t\t\t\t\tthis.groups = data.Matched.Groups;\n\t\t\t\t\t}\n\t\t\t\t\tif (data.ConfigOption !== undefined && data.ConfigOption.Options !== undefined && data.ConfigOption.Options.length > 0){\n\t\t\t\t\t\tcallback(data.ConfigOption.Options, null);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tcallback([],\"Failed to retrieve vehicle sub models\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: function(xhr,status,err){\n\t\t\t\t\tcallback([],err);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tget_configuration: function(callback){\n\t\t\tthis.parts = this.groups = [];\n\n\t\t\t// Build out API Endpoint\n\t\t\tvar path = API_DOMAIN + '/vehicle/' + this.year + '/' + this.make +'/' + this.model + '/' + this.submodel;\n\n\t\t\t// Loop configuration options and append to\n\t\t\t// endpoint address\n\t\t\tfor (var i = this.configuration.length - 1; i >= 0; i--) {\n\t\t\t\tpath += '/' + this.configuration[i];\n\t\t\t}\n\n\t\t\t// Execute AJAX\n\t\t\t$.ajax({\n\t\t\t\turl: path,\n\t\t\t\ttype: 'get',\n\t\t\t\tdataType: 'json',\n\t\t\t\tdata:{\n\t\t\t\t\tkey: API_KEY\n\t\t\t\t},\n\t\t\t\tsuccess: function(data, status, xhr){\n\t\t\t\t\tif(data.Matched.Parts !== null && data.Matched.Parts.length > 0){\n\t\t\t\t\t\tthis.parts = data.Matched.Parts;\n\t\t\t\t\t\tthis.groups = data.Matched.Groups;\n\t\t\t\t\t}\n\t\t\t\t\tif (data.ConfigOption !== null && data.ConfigOption.Options !== null && data.ConfigOption.Options.length > 0){\n\t\t\t\t\t\tcallback(data.ConfigOption, null);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tcallback([],\"Failed to retrieve vehicle configuration options\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: function(xhr, status, err){\n\t\t\t\t\tcallback([],err);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\t\n\treturn vehicle;\n};"]],"start1":0,"start2":0,"length1":0,"length2":4535}]],"length":4535}
{"contributors":[],"silentsave":false,"ts":1373230469998,"patch":[[{"diffs":[[0,"1c1d';\n\n"],[1,"$.support.cors = true;\n"],[0,"\nwindow."]],"start1":92,"start2":92,"length1":16,"length2":39},{"diffs":[[0,"n(){"],[-1,"\n\t$.support.cors = true;"],[0,"\n\n\tf"]],"start1":152,"start2":152,"length1":32,"length2":8},{"diffs":[[0,"icle;\n};"],[1,"\n\nwindow.CurtPart = function(){\n    \n    function CurtPart(){\n        \n    }\n    \n    var part = {\n        \n    };\n    \n    return part;\n};"]],"start1":4526,"start2":4526,"length1":8,"length2":147}]],"length":4673,"saved":false}
{"ts":1373230859396,"patch":[[{"diffs":[[0,"= {\n        "],[1,"PartId: 0,\n        Status:0,\n        PriceCode: 0,\n        RelatedCount:0,\n        AverageReview: 0,\n        DateModified: '',\n        DateAdded: '',\n        ShortDesc: '',\n        PartClass: '',\n        InstallSheet: {},\n        Attributes: [],\n        VehicleAttributes: [],\n        Content: [],\n        Pricing: [],\n        Reviews: [],\n        Images: [],\n        Related: [],\n        Categories: [],\n        Videos: [],\n        Packages: [],\n        Customer: {}"],[0,"\n    };\n    "]],"start1":4629,"start2":4629,"length1":24,"length2":491}]],"length":5140,"saved":false}
